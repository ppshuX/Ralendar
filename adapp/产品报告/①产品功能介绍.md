# ① 产品功能介绍

## 1.1 核心功能

### 📅 日历视图展示

#### 月视图
- **功能描述**：显示整月日历，支持日期选择、日程标记、节日显示
- **主要特性**：
  - 整月日历网格显示
  - 有日程的日期显示标记点
  - 有节日的日期显示节日名称和图标
  - 点击日期可查看该日期的详细日程
  - 支持月份导航（上一月/下一月）

#### 周视图
- **功能描述**：横向7天选择器 + 时间线视图，便于查看一周安排
- **主要特性**：
  - 横向7天日期选择器
  - 详细时间线视图（24小时）
  - 按时间段显示日程安排
  - 支持左右滑动切换周
  - 点击日程可查看详情或编辑

#### 日视图
- **功能描述**：详细时间线视图，精确到小时，适合查看单日详细安排
- **主要特性**：
  - 单日详细时间线（24小时）
  - 按时间段显示日程安排
  - 精确到小时级别
  - 支持查看日程详情
  - 支持添加新日程

#### 视图切换
- **功能描述**：一键切换三种视图模式，流畅的动画过渡
- **实现方式**：点击视图切换按钮，在三种视图模式之间循环切换
- **用户体验**：流畅的动画过渡，保持数据一致性

---

### ✏️ 日程管理

#### 添加日程
- **功能描述**：支持添加新的日程事件
- **支持信息**：
  - 标题（必填）
  - 描述（可选）
  - 日期时间（必填）
  - 提醒时间（可选，支持提前5分钟、15分钟、30分钟、1小时、1天等）
  - 地点（可选，支持地图选择）
  - 位置信息（可选，支持经纬度）
- **操作方式**：
  - 点击"添加日程"按钮
  - 在日历上点击日期
  - 使用AI智能创建（自然语言输入）

#### 编辑日程
- **功能描述**：可修改日程的所有属性
- **支持修改**：
  - 标题、描述
  - 日期时间
  - 提醒时间
  - 地点和位置信息
- **操作方式**：
  - 点击日程项进入详情
  - 点击"编辑"按钮
  - 修改信息后保存

#### 查看日程
- **功能描述**：显示日程详细信息
- **显示内容**：
  - 标题、描述
  - 日期时间
  - 提醒时间
  - 地点信息
  - 相关操作按钮（编辑、删除）

#### 删除日程
- **功能描述**：支持删除用户创建的日程
- **限制**：
  - 只能删除用户创建的日程
  - 不能删除订阅的日程（需在订阅管理中取消订阅）
- **操作方式**：
  - 在日程详情中点击"删除"按钮
  - 确认删除操作

---

### 🔔 提醒功能

#### 自定义提醒时间
- **功能描述**：支持设置提前提醒时间
- **预设选项**：
  - 提前5分钟
  - 提前15分钟
  - 提前30分钟
  - 提前1小时
  - 提前1天
- **实现方式**：基于 Android AlarmManager 实现系统级提醒

#### 系统通知
- **功能描述**：在设定时间发送系统通知
- **通知内容**：
  - 日程标题
  - 日程时间
  - 日程地点（如果有）
- **通知操作**：
  - 点击通知跳转到日程详情
  - 支持Android 13+的通知权限管理

#### 权限管理
- **功能描述**：支持Android 13+的通知权限请求
- **权限类型**：
  - POST_NOTIFICATIONS（Android 13+）
  - 自动检测系统版本并请求相应权限

---

## 1.2 扩展功能

### 📡 网络订阅功能

#### 公共日历订阅
- **功能描述**：支持订阅公共日历
- **可用日历**：
  - **中国法定节假日**：春节、国庆节、劳动节等
  - **农历传统节日**：元宵节、端午节、中秋节、重阳节等
  - **国际纪念日**：情人节、圣诞节、万圣节、感恩节等

#### 节日订阅管理
- **功能描述**：支持订阅/取消订阅特定节日
- **功能特性**：
  - 订阅后节日自动显示在日历上
  - 默认订阅所有常见节日
  - 可取消订阅不需要的节日
  - 订阅状态持久化存储

#### 自动同步
- **功能描述**：订阅的日历事件自动同步到本地
- **同步机制**：
  - 订阅后自动下载日历事件
  - 保存到本地数据库
  - 在日历上显示
  - 支持开启/关闭订阅

---

### 🏮 农历相关功能

#### 农历日期显示
- **功能描述**：在"今日节日"Tab中显示当前日期的农历信息
- **显示内容**：
  - 农历日期（如：正月初一）
  - 生肖信息
  - 天干地支
- **数据来源**：后端API提供农历转换服务

#### 农历转换
- **功能描述**：后端API支持公历到农历的转换
- **转换方式**：
  - 调用后端API：`GET /api/lunar/?date=YYYY-MM-DD`
  - 返回农历日期、生肖、天干地支等信息

#### 农历节日
- **功能描述**：自动识别并显示农历传统节日
- **支持节日**：
  - 除夕、春节、元宵节
  - 端午节、中秋节、重阳节等

---

### 🌐 云端同步

#### 双模式支持
- **本地模式**：
  - 数据存储在本地 Room 数据库
  - 完全离线可用
  - 数据不共享
- **云端模式**：
  - 数据同步到服务器
  - 支持多设备访问
  - 需要登录账号

#### 自动切换
- **功能描述**：根据登录状态自动切换模式
- **切换逻辑**：
  - 已登录：自动切换到云端模式
  - 未登录：使用本地模式
- **用户体验**：无缝切换，数据自动同步

#### 数据同步
- **功能描述**：云端模式下的增删改查操作实时同步
- **同步机制**：
  - 创建日程：立即同步到云端
  - 编辑日程：立即同步到云端
  - 删除日程：立即同步到云端
  - 数据获取：从云端获取最新数据

---

### 🤖 AI 智能功能

#### 自然语言解析
- **功能描述**：支持自然语言输入创建日程
- **示例**：
  - "明天下午3点开会"
  - "下周三上午9点面试"
  - "12月25日圣诞节"
- **解析结果**：
  - 自动识别日期时间
  - 自动提取标题
  - 自动识别地点（如果有）

#### 智能创建日程
- **功能描述**：AI自动解析时间、地点、标题等信息
- **实现方式**：
  - 调用后端AI API
  - 解析自然语言输入
  - 自动填充到表单
  - 用户确认后创建日程

#### 节日问答
- **功能描述**：支持向AI提问节日相关问题
- **功能特性**：
  - 节日历史由来
  - 节日传统习俗
  - 节日庆祝活动
  - 节日美食推荐

---

### 🌤️ 天气信息

#### 实时天气
- **功能描述**：显示当前位置的实时天气信息
- **显示内容**：
  - 温度
  - 天气状况（晴、阴、雨等）
  - 体感温度
  - 湿度
  - 风速

#### 自动定位
- **功能描述**：基于GPS或网络定位获取天气
- **定位方式**：
  - GPS定位（精确）
  - 网络定位（快速）
  - 手动输入城市名称

---

### 🗺️ 地图功能

#### 地点搜索
- **功能描述**：支持搜索地点并在地图上选择
- **搜索方式**：
  - 输入地点名称搜索
  - 在地图上点击选择
  - 搜索多个城市（自动切换）
- **地图服务**：基于百度地图SDK

#### 位置标记
- **功能描述**：日程可关联地理位置
- **标记信息**：
  - 地点名称
  - 经纬度坐标
  - 地图显示

---

### 🔮 运势查询

#### 每日运势
- **功能描述**：结合天气信息提供每日运势
- **运势内容**：
  - 综合运势
  - 爱情运势
  - 事业运势
  - 财运
  - 健康运势

#### 个性化内容
- **功能描述**：根据日期和天气生成运势内容
- **生成方式**：
  - 调用后端API
  - 结合当前日期和天气信息
  - 生成个性化运势内容

---

## 1.3 用户体验特性

### 流畅动画
- **视图切换**：流畅的动画过渡效果
- **数据加载**：优雅的加载动画
- **交互反馈**：即时的视觉反馈

### 实时更新
- **数据修改**：数据修改后立即反映在UI上
- **日历标记**：实时更新日程和节日标记
- **列表刷新**：日程列表实时更新

### 离线支持
- **本地模式**：完全支持离线使用
- **数据缓存**：本地数据自动缓存
- **离线提示**：网络不可用时给出提示

### 数据持久化
- **自动保存**：所有数据自动保存
- **持久化存储**：使用Room数据库持久化存储
- **数据恢复**：应用重启后数据自动恢复

---

## 1.4 技术特性

### 性能优化
- **异步处理**：使用Kotlin Coroutines处理异步操作
- **数据懒加载**：按需加载数据，减少内存占用
- **资源管理**：合理的资源释放，避免内存泄漏

### 代码质量
- **架构清晰**：分层架构，职责明确
- **代码复用**：可复用的组件和工具类
- **错误处理**：完善的异常处理机制

### 可扩展性
- **模块化设计**：各功能模块独立，易于扩展
- **接口抽象**：统一的接口设计，易于替换实现
- **配置灵活**：支持多种配置方式

