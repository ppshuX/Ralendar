# ğŸ“§ å›å¤ Roamio å›¢é˜Ÿ - å…³äº 500 é”™è¯¯

> **å‘é€æ—¶é—´**: 2025-11-09  
> **ä¸»é¢˜**: 500 é”™è¯¯ - æœåŠ¡å™¨å°šæœªéƒ¨ç½²ä¿®å¤ä»£ç   

---

Hi Roamio å›¢é˜Ÿï¼

éå¸¸æŠ±æ­‰ï¼ä½ ä»¬é‡åˆ°çš„ 500 é”™è¯¯æ˜¯å› ä¸ºï¼š

## âŒ é—®é¢˜åŸå› 

**æœåŠ¡å™¨è¿˜æ²¡æœ‰éƒ¨ç½²ä¿®å¤ä»£ç ï¼**

è™½ç„¶æˆ‘å·²ç»ä¿®å¤äº†ä»£ç å¹¶æ¨é€åˆ° GitHubï¼ˆCommit 630c6f5ï¼‰ï¼Œä½†ç”±äº SSH è¿æ¥é—®é¢˜ï¼ŒæœåŠ¡å™¨ä¸Šçš„ä»£ç è¿˜æ˜¯æ—§ç‰ˆæœ¬ã€‚

## ğŸ› Bug è¯¦æƒ…

**æ–‡ä»¶**: `backend/api/views/fusion.py`  
**è¡Œå·**: 85  
**é—®é¢˜**: å˜é‡ `data` åœ¨å®šä¹‰å‰ä½¿ç”¨

```python
# æ—§ä»£ç ï¼ˆæœ‰ Bugï¼‰
unionid = data.get('unionid', '')  # âŒ data è¿˜æ²¡å®šä¹‰

# æ–°ä»£ç ï¼ˆå·²ä¿®å¤ï¼‰
unionid = request.data.get('unionid', '')  # âœ… ç›´æ¥ä½¿ç”¨ request.data
```

## â° ä¿®å¤çŠ¶æ€

- âœ… **ä»£ç å·²ä¿®å¤**: Commit 630c6f5
- âœ… **GitHub å·²æ¨é€**: å®Œæˆ
- â³ **æœåŠ¡å™¨éƒ¨ç½²**: æ­£åœ¨è¿›è¡Œ

## ğŸš€ éƒ¨ç½²è®¡åˆ’

### **é¢„è®¡å®Œæˆæ—¶é—´**: 10 åˆ†é’Ÿå†…

### **éƒ¨ç½²æ­¥éª¤**:
1. SSH ç™»å½•æœåŠ¡å™¨
2. `git pull` æ‹‰å–æœ€æ–°ä»£ç 
3. `sudo supervisorctl restart ralendar` é‡å¯æœåŠ¡
4. éªŒè¯éƒ¨ç½²æˆåŠŸ

## ğŸ“ ä½ ä»¬éœ€è¦åšçš„

### **ç¨ç­‰ 10 åˆ†é’Ÿ**

æˆ‘ä¼šç«‹å³éƒ¨ç½²åˆ°æœåŠ¡å™¨ï¼Œéƒ¨ç½²å®Œæˆåä¼šé€šçŸ¥ä½ ä»¬ã€‚

### **æ”¶åˆ°é€šçŸ¥åï¼Œé‡æ–°æµ‹è¯•**

```bash
POST https://app7626.acapp.acwing.com.cn/api/v1/fusion/events/batch/
Authorization: Bearer <your_token>
Content-Type: application/json

{
  "title": "æµ‹è¯•äº‹ä»¶",
  "description": "éƒ¨ç½²åæµ‹è¯•",
  "start_time": "2025-11-10T10:00:00Z",
  "location": "æµ‹è¯•åœ°ç‚¹",
  "latitude": 28.672,
  "longitude": 115.841,
  "reminder_minutes": 5,
  "email_reminder": false
}
```

### **æœŸæœ›ç»“æœ**

```json
{
  "success": true,
  "created_count": 1,
  "skipped_count": 0,
  "events": [
    {
      "id": 123,
      "title": "æµ‹è¯•äº‹ä»¶",
      "start_time": "2025-11-10T10:00:00Z",
      ...
    }
  ]
}
```

## ğŸ”„ éƒ¨ç½²å®Œæˆåä¼šé€šçŸ¥

æˆ‘ä¼šå‘é€é‚®ä»¶é€šçŸ¥ï¼š
- âœ… éƒ¨ç½²å®Œæˆæ—¶é—´
- âœ… æœåŠ¡çŠ¶æ€
- âœ… æµ‹è¯•ç»“æœ
- âœ… å¯ä»¥ç»§ç»­å¼€å‘

## ğŸ™ å†æ¬¡æŠ±æ­‰

æ„Ÿè°¢ä½ ä»¬çš„è€å¿ƒç­‰å¾…å’ŒåŠæ—¶åé¦ˆï¼

Bug ä¿®å¤æœ¬èº«å¾ˆå¿«ï¼ˆ10 åˆ†é’Ÿï¼‰ï¼Œä½†éƒ¨ç½²éœ€è¦ä¸€ç‚¹æ—¶é—´ã€‚

---

## ğŸ“ è”ç³»æ–¹å¼

å¦‚æœæœ‰ä»»ä½•é—®é¢˜ï¼Œéšæ—¶è”ç³»ï¼š
- **QQ**: 2064747320
- **é‚®ç®±**: 2064747320@qq.com
- **GitHub**: ppshuX

---

**Ralendar å›¢é˜Ÿ**  
**ppshuX**  
**2025-11-09 13:00**

---

## ğŸ¯ éƒ¨ç½²åçš„æµ‹è¯•æ¸…å•

éƒ¨ç½²å®Œæˆåï¼Œè¯·æµ‹è¯•ä»¥ä¸‹åœºæ™¯ï¼š

### âœ… æµ‹è¯• 1: å•ä¸ªäº‹ä»¶åˆ›å»º
```json
POST /api/v1/fusion/events/batch/
{
  "title": "å•ä¸ªäº‹ä»¶æµ‹è¯•",
  "start_time": "2025-11-10T10:00:00Z"
}
```

### âœ… æµ‹è¯• 2: å¸¦åœ°ç†ä½ç½®çš„äº‹ä»¶
```json
POST /api/v1/fusion/events/batch/
{
  "title": "åœ°å›¾æµ‹è¯•",
  "start_time": "2025-11-10T10:00:00Z",
  "location": "å—æ˜Œå¤§å­¦(å‰æ¹–æ ¡åŒº)",
  "latitude": 28.672,
  "longitude": 115.841
}
```

### âœ… æµ‹è¯• 3: æ‰¹é‡äº‹ä»¶åˆ›å»º
```json
POST /api/v1/fusion/events/batch/
{
  "source_app": "roamio",
  "related_trip_slug": "test-trip",
  "events": [
    {
      "title": "äº‹ä»¶1",
      "start_time": "2025-11-10T10:00:00Z"
    },
    {
      "title": "äº‹ä»¶2",
      "start_time": "2025-11-10T14:00:00Z"
    }
  ]
}
```

---

**ç­‰å¾…éƒ¨ç½²å®Œæˆé€šçŸ¥ï¼** ğŸš€

